# ── Required paths ────────────────────────────────────────────────────────────
# Read-only source directory — drop MP4 files here
NAS_MOUNT_PATH=/mnt/nas/soccer

# Writable output directory — finished reels written here
NAS_OUTPUT_PATH=/mnt/nas/soccer/output

# Local scratch space for in-progress jobs (~30 GB free needed per job)
WORKING_DIR=/tmp/soccer-pipeline

# Absolute path to directory containing model weight files (e.g. yolov8m.pt)
# On Linux/Mac: /path/to/models    On Windows (Docker Desktop): C:/path/to/models
MODEL_WEIGHTS_PATH=/mnt/nas/soccer/models

# ── Queue ─────────────────────────────────────────────────────────────────────
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1
REDIS_URL=redis://redis:6379/0
MAX_WORKERS=2

# ── Testing ───────────────────────────────────────────────────────────────────
# Set to true to bypass YOLO inference with a no-op detector (no model weights needed).
# For e2e infrastructure tests only — produces empty event logs, no real reels.
USE_NULL_DETECTOR=false

# ── GPU ──────────────────────────────────────────────────────────────────────
# Number of worker replicas (set to GPU count). Run 'make check-gpu' to verify.
GPU_COUNT=1
USE_GPU=true

# ── Detection ─────────────────────────────────────────────────────────────────
YOLO_MODEL_PATH=/models/yolov8m.pt
YOLO_INFERENCE_SIZE=1280
DETECTION_FRAME_STEP=3
MIN_EVENT_CONFIDENCE=0.65
CHUNK_DURATION_SEC=30
CHUNK_OVERLAP_SEC=2.0

# ── Clip padding ──────────────────────────────────────────────────────────────
PRE_EVENT_PAD_SEC=3.0
POST_EVENT_PAD_SEC=5.0

# ── Output encoding ───────────────────────────────────────────────────────────
OUTPUT_CODEC=copy
OUTPUT_CRF=18
OUTPUT_AUDIO_CODEC=copy

# ── NAS reliability ───────────────────────────────────────────────────────────
MAX_NAS_RETRY=3
NAS_RETRY_DELAY_SEC=5.0
WATCH_POLL_INTERVAL_SEC=10.0
WATCH_STABLE_TIME_SEC=30.0
